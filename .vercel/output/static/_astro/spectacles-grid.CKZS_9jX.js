import{j as c,c as _}from"./utils.Cg71Lysi.js";import{b as ue,r as S}from"./index.CtNveh2g.js";import{I as pe}from"./input.DCcXIcas.js";import{S as he,a as de,b as me,c as ge,d as $e}from"./select.CSfHiNBf.js";import{l as J}from"./chevron-down.DIR3PWjg.js";import"./index.DfP4unw-.js";import"./index.COIpsGCK.js";const xe="https://mdv-admin.vercel.app/api";function ye(t){if(!t)return"";const e=new URLSearchParams;t.depth!==void 0&&e.set("depth",t.depth.toString()),t.limit!==void 0&&e.set("limit",t.limit.toString()),t.page!==void 0&&e.set("page",t.page.toString()),t.sort&&e.set("sort",t.sort),t.locale&&e.set("locale",t.locale),t.where&&Object.entries(t.where).forEach(([s,n])=>{typeof n=="object"&&n!==null?Object.entries(n).forEach(([o,a])=>{e.set(`where[${s}][${o}]`,String(a))}):e.set(`where[${s}][equals]`,String(n))});const r=e.toString();return r?`?${r}`:""}async function we(t,e){const r={...e,sort:e?.sort||"-createdAt"},s=ye(r),n=`${xe}/${t}${s}`,o=await fetch(n);if(!o.ok)throw console.error("[Payload API] Fetch failed:",o.status,o.statusText),new Error(`Payload fetch failed: ${o.status} ${o.statusText}`);return await o.json()}var be=new Set(["style"]),ve="use"in ue,Pe={srcset:"srcSet",fetchpriority:ve?"fetchPriority":"fetchpriority"},je=t=>t.startsWith("data-")||t.startsWith("aria-")?t:Pe[t]||t.replace(/-./g,e=>e[1].toUpperCase());function T(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[je(e),be.has(e)&&r&&typeof r!="string"?T(r):r]))}var X=(t,e)=>{if(!(!t||!e))switch(e){case"constrained":return`(min-width: ${t}px) ${t}px, 100vw`;case"fixed":return`${t}px`;case"fullWidth":return"100vw";default:return}},k=t=>t||t===0?`${t}px`:void 0,Se=({width:t,height:e,aspectRatio:r,layout:s,objectFit:n="cover",background:o})=>{const a=[["object-fit",n]];return o?.startsWith("https:")||o?.startsWith("http:")||o?.startsWith("data:")||o?.startsWith("/")?(a.push(["background-image",`url(${o})`]),a.push(["background-size","cover"]),a.push(["background-repeat","no-repeat"])):a.push(["background",o]),s==="fixed"&&(a.push(["width",k(t)]),a.push(["height",k(e)])),s==="constrained"&&(a.push(["max-width",k(t)]),a.push(["max-height",k(e)]),a.push(["aspect-ratio",r?`${r}`:void 0]),a.push(["width","100%"])),s==="fullWidth"&&(a.push(["width","100%"]),a.push(["aspect-ratio",r?`${r}`:void 0]),a.push(["height",k(e)])),Object.fromEntries(a.filter(([,i])=>i))},Ue=[6016,5120,4480,3840,3200,2560,2048,1920,1668,1280,1080,960,828,750,640],D=24,ke=({width:t,layout:e,resolutions:r=Ue})=>{if(e==="fullWidth")return r;if(!t)return[];const s=t*2;return e==="fixed"?[t,s]:e==="constrained"?[t,s,...r.filter(n=>n<s)]:[]},Ne=({src:t,width:e,layout:r="constrained",height:s,aspectRatio:n,breakpoints:o,format:a})=>(o||=ke({width:e,layout:r}),o.sort((i,f)=>i-f).map(i=>{let f;return s&&n&&(f=Math.round(i/n)),{url:t,width:i,height:f,format:a}})),Y=t=>{let{src:e,transformer:r,operations:s}=t;return r?Ne(t).map(({url:n,...o})=>`${r(e,{...s,...o},t.options)?.toString()} ${o.width}w`).join(`,
`):""};function K({width:t,height:e,priority:r,layout:s="constrained",aspectRatio:n,...o}){return t=t&&Number(t)||void 0,e=e&&Number(e)||void 0,r?(o.loading||="eager",o.fetchpriority||="high"):(o.loading||="lazy",o.decoding||="async"),o.alt===""&&(o.role||="presentation"),n?t?e||(e=Math.round(t/n)):e&&(t=Math.round(e*n)):t&&e&&(n=t/e),{width:t,height:e,aspectRatio:n,layout:s,...o}}function _e(t){let{src:e,transformer:r,background:s,layout:n,objectFit:o,breakpoints:a,width:i,height:f,aspectRatio:u,unstyled:g,operations:$,options:w,...y}=K(t);if(r&&s==="auto"){const v=u?Math.round(D/u):void 0,P=r(e,{width:D,height:v},w);P&&(s=P.toString())}const b={width:i,height:f,aspectRatio:u,layout:n,objectFit:o,background:s};if(y.sizes||=X(i,n),g||(y.style={...Se(b),...y.style}),r){y.srcset=Y({src:e,width:i,height:f,aspectRatio:u,layout:n,breakpoints:a,transformer:r,operations:$,options:w});const v=r(e,{...$,width:i,height:f},w);v&&(e=v),(n==="fullWidth"||n==="constrained")&&(i=void 0,f=void 0)}return{...y,src:e?.toString(),width:i,height:f}}function Re(t){return t?t.startsWith("image/")?{format:t.slice(6),mimeType:t}:{format:t,mimeType:`image/${t==="jpg"?"jpeg":t}`}:{}}function Ee({media:t,type:e,...r}){let{src:s,transformer:n,layout:o,breakpoints:a,width:i,height:f,aspectRatio:u,sizes:g,loading:$,decoding:w,operations:y,options:b,...v}=K(r);if(!n)return{};const{format:P,mimeType:I}=Re(e);g||=X(i,o);const z=Y({src:s,width:i,height:f,aspectRatio:u,layout:o,breakpoints:a,transformer:n,format:P,operations:y,options:b}),p=n(s,{...y,width:i,height:f},b);p&&(s=p);const h={...v,sizes:g,srcset:z};return t&&(h.media=t),I&&(h.type=I),h}const Ie={"images.ctfassets.net":"contentful","cdn.builder.io":"builder.io","images.prismic.io":"imgix","www.datocms-assets.com":"imgix","cdn.sanity.io":"imgix","images.unsplash.com":"imgix","cdn.shopify.com":"shopify","s7d1.scene7.com":"scene7","ip.keycdn.com":"keycdn","assets.caisy.io":"bunny","images.contentstack.io":"contentstack","ucarecdn.com":"uploadcare","imagedelivery.net":"cloudflare_images","wsrv.nl":"wsrv"},Ge={"imgix.net":"imgix","wp.com":"wordpress","files.wordpress.com":"wordpress","b-cdn.net":"bunny","storyblok.com":"storyblok","kc-usercontent.com":"kontent.ai","cloudinary.com":"cloudinary","kxcdn.com":"keycdn","imgeng.in":"imageengine","imagekit.io":"imagekit","cloudimg.io":"cloudimage","ucarecdn.com":"uploadcare","supabase.co":"supabase","graphassets.com":"hygraph"},Oe={"/cdn-cgi/image/":"cloudflare","/cdn-cgi/imagedelivery/":"cloudflare_images","/_next/image":"nextjs","/_vercel/image":"vercel","/is/image":"scene7","/_ipx/":"ipx","/_image":"astro","/.netlify/images":"netlify","/storage/v1/object/public/":"supabase","/storage/v1/render/image/public/":"supabase","/v1/storage/buckets/":"appwrite"};function G(t){if(!t)return t;const e=Number(t);return isNaN(e)?t:Math.round(e)}const Le=t=>{const{pathname:e,search:r}=t;return`${e}${r}`},d=t=>t.hostname==="n"?Le(t):t.toString(),l=(t,e)=>typeof t=="string"?new URL(t,"http://n/"):t,B=t=>t===" "?"+":"%"+t.charCodeAt(0).toString(16).toUpperCase().padStart(2,"0"),Q=t=>t?.startsWith("/")?t.slice(1):t,C=t=>t?.endsWith("/")?t.slice(0,-1):t,Me=t=>t?.endsWith("/")?t:`${t}/`,ze=(t,e)=>{const r=B(t),s=B(e);function n(a){return encodeURIComponent(a).replaceAll(t,r).replaceAll(e,s)}function o(a,i){return`${n(a)}${t}${n(String(i))}`}return a=>(Array.isArray(a)?a:Object.entries(a)).flatMap(([f,u])=>u==null?[]:Array.isArray(u)?u.map(g=>o(f,g)):o(f,u)).join(e)},qe=(t,e)=>t==="="&&e==="&"?Te:r=>{const s=r.toString();return Object.fromEntries(s.split(e).map(n=>{const[o,a]=n.split(t);return[decodeURI(o),decodeURI(a)]}))};function Ae(t,e=4e3,r=4e3){let{width:s,height:n}=t;return s=Number(s)||void 0,n=Number(n)||void 0,s&&s>e&&(n&&(n=Math.round(n*e/s)),s=e),n&&n>r&&(s&&(s=Math.round(s*r/n)),n=r),{width:s,height:n}}function R(t){const e=l(t),r=Object.fromEntries(e.searchParams.entries());for(const s in["width","height","quality"]){const n=r[s];if(n){const o=Number(n);isNaN(o)||(r[s]=o)}}return e.search="",{operations:r,src:d(e)}}function ee({keyMap:t={},formatMap:e={},defaults:r={}},s){s.format&&s.format in e&&(s.format=e[s.format]),s.width&&(s.width=G(s.width)),s.height&&(s.height=G(s.height));for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const o=n;if(t[o]===!1){delete s[o];continue}t[o]&&s[o]&&(s[t[o]]=s[o],delete s[o])}for(const n in r){if(!Object.prototype.hasOwnProperty.call(r,n))continue;const o=n,a=r[o];if(!s[o]&&a!==void 0){if(t[o]===!1)continue;const i=t[o]??o;if(i in s)continue;s[i]=a}}return s}const H=t=>Object.fromEntries(Object.entries(t).map(([e,r])=>[r,e]));function We({keyMap:t={},formatMap:e={},defaults:r={}},s){const n=H(t),o=H(e),a=ee({keyMap:n,formatMap:o,defaults:r},s);a.width&&(a.width=G(a.width)),a.height&&(a.height=G(a.height));const i=Number(a.quality);return isNaN(i)||(a.quality=i),a}const Te=t=>{const e=l(t);return Object.fromEntries(e.searchParams.entries())};function U({kvSeparator:t="=",paramSeparator:e="&",...r}={}){const s=ze(t,e);return n=>{const o=ee(r,n);return s(o)}}function Ce({kvSeparator:t="=",paramSeparator:e="&",defaults:r,...s}={}){const n=qe(t,e);return o=>{const a=o?n(o):{};return We(s,a)}}function x(t){const e=U(t),r=Ce(t);return{operationsGenerator:e,operationsParser:r}}function te(t){if(t!=null)try{return!!JSON.parse(t?.toString())}catch{return!!t}}const Fe=t=>Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0));function m(t,e){return((r,s,n)=>{const o=t(r,n);return o?e(o.src,{...o.operations,...Fe(s)},{...o.options,...n}):e(r,s,n)})}const De=new Map(Object.entries(Ie)),Be=Object.entries(Ge),He=Object.entries(Oe);function M(t){return Ze(t)||E(t)}function Ze(t){if(typeof t=="string"&&!t.startsWith("https://"))return!1;const{hostname:e}=l(t),r=De.get(e);return r||Be.find(([s])=>e.endsWith(s))?.[1]||!1}function E(t){const{pathname:e}=l(t);return He.find(([r])=>e.startsWith(r))?.[1]||!1}const Ve="/view?",Je="/preview?",{operationsGenerator:Xe,operationsParser:Ye}=x({keyMap:{format:"output"},kvSeparator:"=",paramSeparator:"&"}),Ke=(t,e)=>{const r=l(t.toString().replace(Ve,Je)),s=r.searchParams.get("project")??"",n=Xe(e);return r.search=n,r.searchParams.append("project",s),d(r)},Qe=t=>{if(E(t)!=="appwrite")return null;const e=l(t),r=Ye(e);delete r.project;const s=e.searchParams.get("project")??"";return e.search="",e.searchParams.append("project",s),{src:e.href,operations:r}},et=m(Qe,Ke),re="/_image",{operationsParser:tt,operationsGenerator:rt}=x({keyMap:{format:"f",width:"w",height:"h",quality:"q"},defaults:{fit:"cover"}}),q=(t,e,r)=>{const s=l(`${C(r?.baseUrl??"")}${r?.endpoint??re}`),n=rt(e);return s.search=n,s.searchParams.set("href",t.toString()),d(s)},st=t=>{const e=l(t),r=e.searchParams.get("href");if(!r)return null;e.searchParams.delete("href");const s=tt(e);return{src:r,operations:s,options:{baseUrl:e.origin}}},nt=(t,e,r={})=>{if(l(t).pathname!==(r?.endpoint??re))return q(t,e,r);const n=st(t);return n?(r.baseUrl??=n.options.baseUrl,q(n.src,{...n.operations,...e},r)):q(t,e,r)},ot=U({defaults:{fit:"cover",format:"webp",sharp:!0}}),at=R,it=(t,e)=>{const r=ot(e),s=l(t);return s.search=r,d(s)},ct=m(at,it),lt=U({keyMap:{format:"output"}}),ft=R,ut=(t,e)=>{const r=lt(e),s=l(t);return s.search=r,d(s)},pt=m(ft,ut),ht=(t,e)=>{const{width:r,height:s}=e;return r&&s&&(e.aspect_ratio??=`${Math.round(Number(r))}:${Math.round(Number(s))}`),pt(t,e)},{operationsGenerator:dt,operationsParser:mt}=x({keyMap:{format:"f"},defaults:{format:"auto",fit:"cover"},formatMap:{jpg:"jpeg"},kvSeparator:"=",paramSeparator:","}),gt=(t,e,r)=>{const s=dt(e),n=l(r?.domain?`https://${r.domain}`:"/");return n.pathname=`/cdn-cgi/image/${s}/${Q(t.toString())}`,d(n)},$t=(t,e)=>{if(E(t)!=="cloudflare")return null;const r=l(t),[,,,s,...n]=r.pathname.split("/"),o=mt(s);return{src:d(l(n.join("/"))),operations:o,options:{domain:e?.domain??(r.hostname==="n"?void 0:r.hostname)}}},xt=m($t,gt),yt=/https?:\/\/(?<host>[^\/]+)\/cdn-cgi\/imagedelivery\/(?<accountHash>[^\/]+)\/(?<imageId>[^\/]+)\/*(?<transformations>[^\/]+)*$/g,wt=/https?:\/\/(?<host>imagedelivery.net)\/(?<accountHash>[^\/]+)\/(?<imageId>[^\/]+)\/*(?<transformations>[^\/]+)*$/g,{operationsGenerator:bt,operationsParser:vt}=x({keyMap:{width:"w",height:"h",format:"f"},defaults:{fit:"cover"},kvSeparator:"=",paramSeparator:","});function se(t,e){const{host:r,accountHash:s,imageId:n}=t;if(!r||!s||!n)throw new Error("Missing required Cloudflare Images options");return["https:/",...r==="imagedelivery.net"?[r]:[r,"cdn-cgi","imagedelivery"],s,n,e].filter(Boolean).join("/")}const Pt=(t,e,r={})=>{const s=bt(e),n=se(r,s);return d(l(n))},jt=t=>{const e=l(t),r=[...e.toString().matchAll(yt),...e.toString().matchAll(wt)];if(!r[0]?.groups)return null;const{host:s,accountHash:n,imageId:o,transformations:a}=r[0].groups,i=vt(a||""),f={host:s,accountHash:n,imageId:o};return{src:se(f),operations:i,options:f}},St=(t,e,r={})=>{const s=jt(t);if(!s)throw new Error("Invalid Cloudflare Images URL");const n={...s.operations,...e};return Pt(s.src,n,{...s.options,...r})},{operationsGenerator:Ut,operationsParser:kt}=x({keyMap:{format:"force_format",width:"w",height:"h",quality:"q"},defaults:{org_if_sml:1}}),Nt=(t,e={},{token:r}={})=>{if(!r)throw new Error("Token is required for Cloudimage URLs"+t);let s=t.toString();s=s.replace(/^https?:\/\//,""),s.includes("?")&&(e.ci_url_encoded=1,s=encodeURIComponent(s));const n=Ut(e),o=new URL(`https://${r}.cloudimg.io/`);return o.pathname=s,o.search=n,o.toString()},_t=(t,e={})=>{const r=l(t);if(M(r)!=="cloudimage")return null;const s=kt(r);let n=r.pathname;return s.ci_url_encoded&&(n=decodeURIComponent(n),delete s.ci_url_encoded),e.token??=r.hostname.replace(".cloudimg.io",""),{src:`${r.protocol}/${n}`,operations:s,options:e}},Rt=m(_t,Nt),Et=/https?:\/\/(?<host>res\.cloudinary\.com)\/(?<cloudName>[a-zA-Z0-9-]+)\/(?<assetType>image|video|raw)\/(?<deliveryType>upload|fetch|private|authenticated|sprite|facebook|twitter|youtube|vimeo)\/?(?<signature>s\-\-[a-zA-Z0-9]+\-\-)?\/?(?<transformations>(?:[^_\/]+_[^,\/]+,?)*)?\/(?:(?<version>v\d+)\/)?(?<id>(?:[^\s\/]+\/)*[^\s\/]+(?:\.[a-zA-Z0-9]+)?)$/,It=/https?:\/\/(?<host>(?<cloudName>[a-zA-Z0-9-]+)-res\.cloudinary\.com|[a-zA-Z0-9.-]+)\/(?<assetType>image|video|raw)\/(?<deliveryType>upload|fetch|private|authenticated|sprite|facebook|twitter|youtube|vimeo)\/?(?<signature>s\-\-[a-zA-Z0-9]+\-\-)?\/?(?<transformations>(?:[^_\/]+_[^,\/]+,?)*)?\/(?:(?<version>v\d+)\/)?(?<id>(?:[^\s\/]+\/)*[^\s\/]+(?:\.[a-zA-Z0-9]+)?)$/,{operationsGenerator:Gt,operationsParser:Ot}=x({keyMap:{width:"w",height:"h",format:"f",quality:"q"},defaults:{format:"auto",c:"lfill"},kvSeparator:"_",paramSeparator:","});function Lt({host:t,cloudName:e,assetType:r,deliveryType:s,signature:n,transformations:o,version:a,id:i}){return["https:/",t,t==="res.cloudinary.com"?e:void 0,r,s,n,o,a,i].filter(Boolean).join("/")}function Mt(t){let e=t.toString().match(Et);return e?.length||(e=t.toString().match(It)),e?.length?e.groups||{}:null}const zt=(t,e)=>{const r=Mt(t.toString());if(!r)return t.toString();const s=Ot(r.transformations||"");return r.transformations=Gt({...s,...e}),Lt(r)},qt=U({keyMap:{format:"fm",width:"w",height:"h",quality:"q"},defaults:{fit:"fill"}}),At=(t,e)=>{const r=qt(e),s=new URL(t);return s.search=r,d(s)},Wt=R,Tt=m(Wt,At),Ct=(t,e)=>{const{width:r,height:s}=Ae(e,4e3,4e3);return Tt(t,{...e,width:r,height:s})},Ft=U({defaults:{auto:"webp",disable:"upscale"}}),Dt=(t,e,{baseURL:r="https://images.contentstack.io/"}={})=>{e.width&&e.height&&(e.fit??="crop");const s=Ft(e),n=l(t);return n.hostname==="n"&&(n.protocol="https:",n.hostname=new URL(r).hostname),n.search=s,d(n)},Bt=t=>{const{src:e,operations:r}=R(t)??{};if(!r||!e)return null;const{origin:s}=l(t);return{src:e,operations:r,options:{baseURL:s}}},Ht=m(Bt,Dt),Zt=U({defaults:{withoutEnlargement:!0,fit:"cover"}}),Vt=(t,e)=>{Array.isArray(e.transforms)&&(e.transforms=JSON.stringify(e.transforms));const r=Zt(e),s=l(t);return s.search=r,d(s)},Jt=t=>{const e=R(t);if(e?.operations?.transforms&&typeof e.operations.transforms=="string")try{e.operations.transforms=JSON.parse(e.operations.transforms)}catch{return null}return e},Xt=m(Jt,Vt),Yt=/https:\/\/(?<region>[a-z0-9-]+)\.graphassets\.com\/(?<envId>[a-zA-Z0-9]+)(?:\/(?<transformations>.*?))?\/(?<handle>[a-zA-Z0-9]+)$/;x({keyMap:{width:"width",height:"height",format:"format"},defaults:{format:"auto",fit:"crop"}});const ne=t=>{const r=l(t).toString().match(Yt);if(!r?.groups)return null;const{region:s,envId:n,handle:o,transformations:a}=r.groups,i={};return a&&a.split("/").forEach(u=>{const[g,$]=u.split("=");g==="resize"&&$?$.split(",").forEach(w=>{const[y,b]=w.split(":");y==="width"||y==="height"?i[y]=Number(b):y==="fit"&&(i.fit=b)}):g==="output"&&$?$.split(",").forEach(w=>{const[y,b]=w.split(":");y==="format"&&(i.format=b)}):g==="auto_image"&&(i.format="auto")}),{src:`https://${s}.graphassets.com/${n}/${o}`,operations:i,options:{region:s,envId:n,handle:o}}},Kt=(t,e,r={})=>{const s=ne(t);if(!s)throw new Error("Invalid Hygraph URL");const{region:n,envId:o,handle:a}={...s.options,...r},i=[];if(e.width||e.height){const $=[];e.width&&e.height?$.push("fit:crop"):e.fit&&$.push(`fit:${e.fit}`),e.width&&$.push(`width:${e.width}`),e.height&&$.push(`height:${e.height}`),$.length&&i.push(`resize=${$.join(",")}`)}e.format==="auto"||!e.format&&!s.operations.format?i.push("auto_image"):e.format&&i.push(`output=format:${e.format}`);const f=`https://${n}.graphassets.com/${o}`,u=i.length>0?"/"+i.join("/"):"",g=l(`${f}${u}/${a}`);return d(g)},Qt=m(ne,Kt),{operationsGenerator:er,operationsParser:tr}=x({keyMap:{width:"w",height:"h",format:"f"},defaults:{m:"cropbox"},kvSeparator:"_",paramSeparator:"/"}),rr=(t,e)=>{const r=er(e),s=l(t);return s.searchParams.set("imgeng",r),d(s)},sr=t=>{const e=l(t),r=e.searchParams.get("imgeng");if(!r)return null;const s=tr(r);return e.searchParams.delete("imgeng"),{src:d(e),operations:s}},nr=m(sr,rr),{operationsGenerator:or,operationsParser:ar}=x({keyMap:{width:"w",height:"h",format:"f",quality:"q"},defaults:{c:"maintain_ratio",fo:"auto"},kvSeparator:"-",paramSeparator:","}),ir=(t,e)=>{const r=or(e),s=l(t);return s.searchParams.set("tr",r),d(s)},cr=t=>{const e=l(t);let r=null,s=e.pathname;if(e.searchParams.has("tr"))r=e.searchParams.get("tr"),e.searchParams.delete("tr");else{const o=e.pathname.split("/"),a=o.findIndex(i=>i.startsWith("tr:"));a!==-1&&(r=o[a].slice(3),s=o.slice(0,a).concat(o.slice(a+1)).join("/"))}if(!r)return null;e.pathname=s;const n=ar(r);return{src:d(e),operations:n}},lr=m(cr,ir),{operationsGenerator:fr,operationsParser:ur}=x({keyMap:{format:"fm",width:"w",height:"h",quality:"q"},defaults:{fit:"min",auto:"format"}}),pr=t=>{const e=l(t),r=ur(t);return e.search="",{src:d(e),operations:r}},hr=(t,e)=>{const r=fr(e),s=l(t);return s.search=r,s.searchParams.has("fm")&&s.searchParams.get("auto")==="format"&&s.searchParams.delete("auto"),d(s)},dr=m(pr,hr),{operationsGenerator:mr,operationsParser:gr}=x({keyMap:{width:"w",height:"h",quality:"q",format:"f"},defaults:{f:"auto"},kvSeparator:"_",paramSeparator:","}),Z=(t,e,r)=>{e.width&&e.height&&(e.s=`${e.width}x${e.height}`,delete e.width,delete e.height);const s=mr(e),n=r?.baseURL??"/_ipx",o=l(n);return o.pathname=`${C(o.pathname)}/${s}/${Q(t.toString())}`,d(o)},$r=t=>{const e=l(t),[,r,s,...n]=e.pathname.split("/");if(!s||!n.length)return null;const o=gr(s);if(o.s){const[a,i]=o.s.split("x").map(Number);o.width=a,o.height=i,delete o.s}return{src:"/"+n.join("/"),operations:o,options:{baseURL:`${e.origin}/${r}`}}},xr=(t,e,r)=>{const s=l(t),n=r?.baseURL;if(n&&s.toString().startsWith(n)||s.pathname.startsWith("/_ipx")){const o=$r(t);if(o)return Z(o.src,{...o.operations,...e},{baseURL:o.options.baseURL})}return Z(t,e,{baseURL:n})},oe=["enlarge","flip","flop","negate","normalize","grayscale","removealpha","olrepeat","progressive","adaptive","lossless","nearlossless","metadata"],{operationsGenerator:yr,operationsParser:wr}=x({defaults:{fit:"cover"},formatMap:{jpg:"jpeg"}}),br=(t,e)=>{const r=l(t);for(const s of oe)e[s]!==void 0&&(e[s]=e[s]?1:0);return r.search=yr(e),d(r)},vr=t=>{const e=l(t),r=wr(e);for(const s of oe)r[s]!==void 0&&(r[s]=te(r[s]));return e.search="",{src:d(e),operations:r}},Pr=m(vr,br),{operationsGenerator:jr,operationsParser:Sr}=x({formatMap:{jpg:"jpeg"},keyMap:{format:"fm",width:"w",height:"h",quality:"q"}}),Ur=(t,e)=>{const r=l(t);return e.lossless!==void 0&&(e.lossless=e.lossless?1:0),e.width&&e.height&&(e.fit="crop"),r.search=jr(e),d(r)},kr=t=>{const e=l(t),r=Sr(e);return r.lossless!==void 0&&(r.lossless=te(r.lossless)),e.search="",{src:d(e),operations:r}},Nr=m(kr,Ur),{operationsGenerator:_r,operationsParser:Rr}=x({defaults:{fit:"cover"},keyMap:{format:"fm",width:"w",height:"h",quality:"q"}}),Er=(t,e,r={})=>{const s=l(`${r.baseUrl||""}/.netlify/images`);return s.search=_r(e),s.searchParams.set("url",t.toString()),d(s)},Ir=t=>{if(E(t)!=="netlify")return null;const e=l(t),r=Rr(e);delete r.url;const s=e.searchParams.get("url")||"";return e.search="",{src:s,operations:r,options:{baseUrl:e.hostname==="n"?void 0:e.origin}}},Gr=m(Ir,Er),{operationsGenerator:Or,operationsParser:Lr}=x({keyMap:{width:"w",quality:"q",height:!1,format:!1},defaults:{q:75}}),ae=(t,e,r={})=>{const s=l(`${r.baseUrl||""}/${r.prefix||"_vercel"}/image`);return s.search=Or(e),s.searchParams.append("url",t.toString()),d(s)},ie=(t,e={})=>{if(!["vercel","nextjs"].includes(E(t)||""))return null;const r=l(t),s=r.searchParams.get("url")||"";r.searchParams.delete("url");const n=Lr(r);return r.search="",{src:s,operations:n,options:{baseUrl:e.baseUrl??r.origin}}},Mr=m(ie,ae),zr=(t,e,r={})=>ae(t,e,{...r,prefix:"_next"}),qr=(t,e)=>ie(t,e),Ar=m(qr,zr),{operationsGenerator:Wr,operationsParser:Tr}=x({keyMap:{width:"wid",height:"hei",quality:"qlt",format:"fmt"},defaults:{fit:"crop,0"}}),ce="https://s7d1.scene7.com/is/image/",Cr=(t,e)=>{const r=new URL(t,ce);return r.search=Wr(e),d(r)},Fr=t=>{if(M(t)!=="scene7")return null;const e=new URL(t,ce),r=Tr(e);return e.search="",{src:e.toString(),operations:r}},Dr=m(Fr,Cr),W=/(.+?)(?:_(?:(pico|icon|thumb|small|compact|medium|large|grande|original|master)|(\d*)x(\d*)))?(?:_crop_([a-z]+))?(\.[a-zA-Z]+)(\.png|\.jpg|\.webp|\.avif)?$/,{operationsGenerator:Br,operationsParser:Hr}=x({keyMap:{format:!1}}),Zr=(t,e)=>{const r=l(t),s=r.pathname.replace(W,"$1$6");return r.pathname=s,r.search=Br(e),d(r)},Vr=t=>{const e=l(t),r=W.exec(e.pathname),s=Hr(e);if(r){const[,,,o,a,i]=r;o&&a&&!s.width&&!s.height&&(s.width=parseInt(o,10),s.height=parseInt(a,10)),i&&(s.crop??=i)}const n=e.pathname.replace(W,"$1$6");e.pathname=n;for(const o of["width","height","crop","pad_color","format"])e.searchParams.delete(o);return{src:e.toString(),operations:s}},Jr=m(Vr,Zr),Xr=/(?<id>\/f\/\d+\/\d+x\d+\/\w+\/[^\/]+)\/?(?<modifiers>m\/?(?<crop>\d+x\d+:\d+x\d+)?\/?(?<resize>(?<flipx>\-)?(?<width>\d+)x(?<flipy>\-)?(?<height>\d+))?\/?(filters\:(?<filters>[^\/]+))?)?$/,Yr=/^(?<modifiers>\/(?<crop>\d+x\d+:\d+x\d+)?\/?(?<resize>(?<flipx>\-)?(?<width>\d+)x(?<flipy>\-)?(?<height>\d+))?\/?(filters\:(?<filters>[^\/]+))?\/?)?(?<id>\/f\/.+)$/,Kr=/:(?![^(]*\))/,Qr=t=>t?Object.fromEntries(t.split(Kr).map(e=>{if(!e)return[];const[r,s]=e.split("(");return[r,s.replace(")","")]})):{},es=t=>{if(!t)return;const e=Object.entries(t).map(([r,s])=>`${r}(${s??""})`);if(e.length!==0)return`filters:${e.join(":")}`},ts=t=>{const e=l(t),s=(e.hostname==="img2.storyblok.com"?Yr:Xr).exec(e.pathname);if(!s||!s.groups)return null;const{id:n,crop:o,width:a,height:i,filters:f,flipx:u,flipy:g}=s.groups,{format:$,...w}=Qr(f??"");e.hostname==="img2.storyblok.com"&&(e.hostname="a.storyblok.com");const y=Object.fromEntries([["width",Number(a)||void 0],["height",Number(i)||void 0],["format",$],["crop",o],["filters",w],["flipx",u],["flipy",g]].filter(([b,v])=>v!==void 0));return{src:`${e.origin}${n}`,operations:y}},rs=(t,e)=>{const r=l(t),{width:s=0,height:n=0,format:o,crop:a,filters:i={},flipx:f="",flipy:u=""}=e,g=`${f}${s}x${u}${n}`;o&&(i.format=o);const $=[r.pathname,"m",a,g,es(i)].filter(Boolean);return r.pathname=$.join("/"),d(r)},ss=m(ts,rs),O="/storage/v1/object/public/",L="/storage/v1/render/image/public/",ns=t=>t.pathname.startsWith(L),{operationsGenerator:os,operationsParser:as}=x({}),is=(t,e)=>{const r=l(t),s=r.pathname.replace(L,O);return r.pathname=s,e.format&&e.format!=="origin"&&delete e.format,r.search=os(e),d(r).replace(O,L)},cs=t=>{const e=l(t),r=as(e),s=ns(e),n=e.pathname.replace(L,"").replace(O,"");return s?{src:`${e.origin}${O}${n}`,operations:r}:{src:d(e),operations:r}},ls=m(cs,is),le=/^https?:\/\/(?<host>[^\/]+)\/(?<uuid>[^\/]+)(?:\/(?<filename>[^\/]+)?)?/,{operationsGenerator:fs,operationsParser:us}=x({keyMap:{width:!1,height:!1},defaults:{format:"auto"},kvSeparator:"/",paramSeparator:"/-/"}),ps=t=>{const e=l(t),r=le.exec(e.toString());if(!r||!r.groups)return null;const{host:s,uuid:n}=r.groups,[,...o]=e.pathname.split("/-/"),a=us(o.join("/-/")||"");if(a.resize){const[i,f]=a.resize.split("x");i&&(a.width=parseInt(i)),f&&(a.height=parseInt(f)),delete a.resize}return{src:`https://${s}/${n}/`,operations:a,options:{host:s}}},hs=(t,e,r={})=>{const s=l(t),n=r.host||s.hostname,o=le.exec(s.toString());o?.groups&&(s.pathname=`/${o.groups.uuid}/`),e.resize=e.resize||`${e.width??""}x${e.height??""}`,delete e.width,delete e.height;const a=Me(fs(e));return s.hostname=n,s.pathname=C(s.pathname)+(a?`/-/${a}`:"")+(o?.groups?.filename??""),d(s)},ds=m(ps,hs),{operationsGenerator:ms,operationsParser:gs}=x({keyMap:{width:"w",height:"h"},defaults:{crop:"1"}}),$s=(t,e)=>{const r=l(t),{crop:s}=e;return typeof s<"u"&&s!=="0"&&(e.crop=s?"1":"0"),r.search=ms(e),d(r)},xs=t=>{const e=l(t),r=gs(e);return r.crop!==void 0&&(r.crop=r.crop==="1"),e.search="",{src:d(e),operations:r}},ys=m(xs,$s),{operationsGenerator:ws,operationsParser:bs}=x({keyMap:{width:"w",height:"h",format:"output",quality:"q"},defaults:{fit:"cover"}}),vs=t=>{const e=l(t),r=e.searchParams.get("url");if(!r)return null;let s=r;!s.startsWith("http://")&&!s.startsWith("https://")&&(s="https://"+s),e.searchParams.delete("url");const n=bs(e);return{src:s,operations:n}},Ps=(t,e)=>{const r=new URL("https://wsrv.nl/"),n=(typeof t=="string"?t:t.toString()).replace(/^https?:\/\//,"");r.searchParams.set("url",n);const o=ws(e),a=new URLSearchParams(o);for(const[i,f]of a)i!=="url"&&r.searchParams.set(i,f);return d(r)},js=m(vs,Ps),Ss={appwrite:et,astro:nt,"builder.io":ct,bunny:ht,cloudflare:xt,cloudflare_images:St,cloudimage:Rt,cloudinary:zt,contentful:Ct,contentstack:Ht,directus:Xt,hygraph:Qt,imageengine:nr,imagekit:lr,imgix:dr,ipx:xr,keycdn:Pr,"kontent.ai":Nr,netlify:Gr,nextjs:Ar,scene7:Dr,shopify:Jr,storyblok:ss,supabase:ls,uploadcare:ds,vercel:Mr,wordpress:ys,wsrv:js};function fe(t){if(t)return Ss[t]}function Us({cdn:t,fallback:e,operations:r={},options:s,...n}){if(t??=M(n.src)||e,!t)return n;const o=fe(t);return o?_e({...n,operations:r?.[t],options:s?.[t],transformer:o}):n}function ks({cdn:t,fallback:e,operations:r,options:s,...n}){if(t??=M(n.src)||e,!t)return n;const o=fe(t);return o?Ee({...n,operations:r?.[t],options:s?.[t],transformer:o}):n}var V=S.forwardRef(function(e,r){const s=T(Us(e));return c.jsx("img",{...s,ref:r})});S.forwardRef(function(e,r){const s=T(ks(e));return c.jsx("source",{...s,ref:r})});const Ns={src:"/_astro/placeholder.BJMSctPW.webp"};function _s({src:t,alt:e,payloadUrl:r,background:s,width:n,height:o,loading:a="lazy",layout:i="fullWidth",className:f,priority:u}){const g=t?`${r}${t}`:Ns.src;return i==="fullWidth"?c.jsx(V,{src:g,alt:e,layout:"fullWidth",loading:a,background:s??void 0,className:f,priority:u}):c.jsx(V,{src:g,alt:e,width:n,height:o,loading:a,layout:i,background:s??void 0,className:f,priority:u})}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Es=J("chevron-left",Rs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gs=J("chevron-right",Is);function N({options:t,className:e,placeholder:r,value:s,defaultValue:n,onValueChange:o}){return c.jsxs(he,{value:s,defaultValue:n,onValueChange:o,children:[c.jsx(de,{className:`border-0 bg-primary-foreground rounded-none h-full ${e}`,children:c.jsx(me,{placeholder:r})}),c.jsx(ge,{className:"bg-white",children:t.map(a=>{const i=typeof a=="object",f=i?a.value:a,u=i?a.key:a;return c.jsx($e,{value:f,className:"py-3 [&_svg]:text-primary focus:bg-primary focus:text-primary-foreground focus:[&_svg]:text-primary-foreground",children:u},f)})})]})}function Os({className:t,...e}){return c.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:_("mx-auto flex w-full justify-center",t),...e})}function Ls({className:t,...e}){return c.jsx("ul",{"data-slot":"pagination-content",className:_("flex flex-row items-center gap-1",t),...e})}function A({...t}){return c.jsx("li",{"data-slot":"pagination-item",...t})}function F({className:t,isActive:e,size:r="icon",...s}){return c.jsx("a",{"aria-current":e?"page":void 0,"data-slot":"pagination-link","data-active":e,className:_("inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors",r==="icon"?"size-9":"h-9 px-4 py-2",e?"bg-primary text-white hover:bg-primary/90":"text-gray-700 hover:bg-primary/20 hover:text-primary",t),...s})}function Ms({className:t,...e}){return c.jsxs(F,{"aria-label":"Go to previous page",size:"default",className:_("gap-1 px-2.5 sm:pl-2.5 hover:bg-primary/20",t),...e,children:[c.jsx(Es,{className:"size-4"}),c.jsx("span",{className:"hidden sm:block",children:"Previous"})]})}function zs({className:t,...e}){return c.jsxs(F,{"aria-label":"Go to next page",size:"default",className:_("gap-1 px-2.5 sm:pr-2.5",t),...e,children:[c.jsx("span",{className:"hidden sm:block",children:"Next"}),c.jsx(Gs,{})]})}function Bs({initialData:t,locale:e,limit:r,payloadUrl:s,showFilters:n=!1,filterType:o="basic",translations:a}){const[i,f]=S.useState(t),[u,g]=S.useState(1),[$,w]=S.useState(!1);S.useEffect(()=>{if(u===1){console.log("[Spectacles] Using initial data for page 1"),f(t);return}(async()=>{w(!0),console.log("[Spectacles] Fetching page:",u,"limit:",r,"locale:",e);try{const h=await we("art_vivant",{limit:r,page:u,locale:e,where:{type:{equals:"evenement"}}});console.log("[Spectacles] Received data:",{totalDocs:h.totalDocs,page:h.page,totalPages:h.totalPages,docs:h.docs.length,firstItemTitle:h.docs[0]?.title}),f(h)}catch(h){console.error("[Spectacles] FETCH ERROR:",h),console.error("[Spectacles] Error details:",{message:h instanceof Error?h.message:"Unknown error",stack:h instanceof Error?h.stack:void 0})}finally{console.log("[Spectacles] Fetch complete, loading:",!1),w(!1)}})()},[u,e,r,t]);const y=p=>p.description.root.children.flatMap(h=>h.children).filter(h=>h.type==="text").map(h=>h.text).join(" "),b=p=>new Date(p).toLocaleDateString(e,{dateStyle:"full"}),v=p=>new Date(p).toLocaleTimeString(e,{hour:"2-digit",minute:"2-digit",hour12:!1}),P=p=>{console.log("[Spectacles] handlePageChange called:",p,"totalPages:",i.totalPages),!(p<1||p>i.totalPages)&&g(p)},I=()=>{const p=[];for(let h=1;h<=i.totalPages;h++)p.push(c.jsx(A,{children:c.jsx(F,{href:"#spectacles",isActive:h===u,onClick:j=>{j.preventDefault(),P(h)},children:h})},h));return p},z=()=>{const p=new Date().getFullYear(),h=[];for(let j=p;j>=2019;j--)h.push({key:j.toString(),value:j.toString()});return h};return c.jsxs(c.Fragment,{children:[n&&c.jsxs("div",{className:"bg-primary mt-6 lg:mt-12 grid grid-cols-1 lg:grid-cols-8 lg:grid-rows-2 gap-4 lg:gap-6 px-5 lg:px-10 py-6 lg:py-8 *:min-h-12",children:[c.jsx(pe,{placeholder:a.MOTS_CLES,className:"rows-span-1 lg:col-span-6 bg-primary-foreground border-0 rounded-none"}),c.jsx(N,{placeholder:a.HORAIRES,options:[{key:"fefef",value:"fef"}],className:"lg:col-span-2 w-full"}),c.jsx(N,{placeholder:a.TYPE_PUBLIC,options:[{key:"fefef",value:"fef"}],className:"lg:col-span-2 w-full"}),c.jsx(N,{placeholder:a.PRIX,options:[{key:"fefef",value:"fef"}],className:"lg:col-span-2 w-full"}),c.jsx(N,{placeholder:a.LIEU,options:[{key:"fefef",value:"fef"}],className:"lg:col-span-2 w-full"}),o==="archives"&&c.jsx(N,{placeholder:a.ANNEE||"AnnÃ©e",options:z(),className:"lg:col-span-2 w-full"})]}),c.jsx("div",{className:"my-8 lg:my-16 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 place-items-center gap-x-4 gap-y-8 *:max-w-80",children:$?c.jsx("div",{className:"col-span-full flex h-96 w-full items-center justify-center",children:c.jsx("div",{className:"border-primary h-12 w-12 animate-spin rounded-full border-4 border-t-transparent"})}):i.docs.map(p=>{const h=y(p);return c.jsxs("article",{className:"group relative col-span-1 w-full overflow-hidden bg-white shadow-sm",children:[c.jsx("div",{className:"overflow-hidden",children:c.jsx(_s,{src:p.thumbnail?.url,payloadUrl:s,alt:p.thumbnail?.alt??a.IMAGE_PLACEHOLDER,width:275,height:305,className:"h-[305px] w-full object-cover",loading:"lazy",layout:"fullWidth",background:p.thumbnail?.blurhash})}),c.jsx("figure",{className:"p-4 transition-opacity duration-250 group-hover:opacity-0",children:c.jsxs("figcaption",{children:[c.jsx("h3",{className:"pb-3 text-black",children:c.jsx("a",{href:`/art-vivant/spectacle/${p.id}`,className:"after:absolute after:inset-0 after:z-10",children:p.title})}),c.jsx("p",{className:"distinguished text-primary pb-1 text-xs",children:p.genre}),c.jsxs("time",{className:"distinguished text-sm capitalize",dateTime:p.date_start,children:[b(p.date_start)," - ",v(p.date_start)]})]})}),c.jsx("div",{className:"bg-primary/80 pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-250 group-hover:opacity-100"}),c.jsx("figure",{className:"pointer-events-none absolute inset-0 p-5 opacity-0 transition-opacity duration-250 group-hover:opacity-100",children:c.jsxs("figcaption",{className:"text-white",children:[c.jsx("p",{className:"line-clamp-8 text-sm",children:h}),c.jsxs("p",{className:"inline-flex items-center gap-2 pt-10 text-sm font-semibold underline underline-offset-2",children:[a.EN_SAVOIR_PLUS,c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M5 12h14"}),c.jsx("path",{d:"m12 5 7 7-7 7"})]})]})]})})]},p.id)})}),c.jsx(Os,{children:c.jsxs(Ls,{children:[c.jsx(A,{children:c.jsx(Ms,{href:"#spectacles",onClick:p=>{p.preventDefault(),P(u-1)},className:u===1?"pointer-events-none opacity-50":"cursor-pointer"})}),I(),c.jsx(A,{children:c.jsx(zs,{href:"#spectacles",onClick:p=>{p.preventDefault(),P(u+1)},className:u===i.totalPages?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})}export{Bs as SpectaclesGrid};
